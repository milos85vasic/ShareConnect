test_suite:
  name: "Dual App Installation Scenarios"
  description: "Test cases for pairs of apps running together with sync functionality"
  priority: "HIGH"
  tags: ["dual_app", "sync", "integration", "regression"]
  app_scenarios: ["dual_shareconnector_transmission", "dual_shareconnector_utorrent", "dual_shareconnector_qbit"]

  test_cases:
    - id: "TC_DUAL_SHARECONNECTOR_TRANSMISSION_001"
      name: "ShareConnector + TransmissionConnector - Full Integration"
      description: "Test complete integration between ShareConnector and TransmissionConnector with sync"
      app_scenario: "dual_shareconnector_transmission"
      steps:
        - "Launch both apps and complete onboarding"
        - "Create profiles in ShareConnector (MeTube, YT-DLP, JDownloader)"
        - "Create Transmission profile in TransmissionConnector"
        - "Verify Asinka sync initializes between apps"
        - "Test theme sync between apps"
        - "Test profile sync between apps"
        - "Test language sync between apps"
        - "Share torrent URL to ShareConnector"
        - "Verify TransmissionConnector receives and processes torrent"
        - "Monitor sync status and data consistency"
        - "Test background sync while apps are closed"
        - "Verify sync conflict resolution"
        - "Test app restart and sync recovery"
        - "Verify both apps show consistent data"
      expected_results:
        - "Both apps onboard successfully"
        - "All sync types work bidirectionally"
        - "URL sharing triggers correct app launch"
        - "Background sync maintains data consistency"
        - "No sync conflicts or data loss"
        - "Apps recover properly after restart"

    - id: "TC_DUAL_SHARECONNECTOR_TRANSMISSION_002"
      name: "ShareConnector + TransmissionConnector - Lifecycle Sync"
      description: "Test sync behavior across different app lifecycles"
      app_scenario: "dual_shareconnector_transmission"
      steps:
        - "Set up profiles and initial sync"
        - "Put TransmissionConnector in background"
        - "Make changes in ShareConnector"
        - "Verify sync occurs while TransmissionConnector is backgrounded"
        - "Force stop TransmissionConnector"
        - "Make more changes in ShareConnector"
        - "Restart TransmissionConnector"
        - "Verify all changes synced properly"
        - "Test doze mode behavior (if supported)"
        - "Verify sync resumes after doze"
        - "Test low battery sync behavior"
        - "Verify sync works with network interruptions"
      expected_results:
        - "Background sync works correctly"
        - "App restart syncs all pending changes"
        - "Doze mode doesn't break sync"
        - "Network recovery triggers sync"
        - "No data loss during lifecycle changes"

    - id: "TC_DUAL_SHARECONNECTOR_UTORRENT_001"
      name: "ShareConnector + uTorrentConnector - Full Integration"
      description: "Test complete integration between ShareConnector and uTorrentConnector with sync"
      app_scenario: "dual_shareconnector_utorrent"
      steps:
        - "Launch both apps and complete onboarding"
        - "Create profiles in ShareConnector (MeTube, YT-DLP, JDownloader)"
        - "Create uTorrent profile in uTorrentConnector"
        - "Verify Asinka sync initializes between apps"
        - "Test theme sync between apps"
        - "Test profile sync between apps"
        - "Test language sync between apps"
        - "Share torrent URL to ShareConnector"
        - "Verify uTorrentConnector receives and processes torrent"
        - "Monitor sync status and data consistency"
        - "Test background sync while apps are closed"
        - "Verify sync conflict resolution"
        - "Test app restart and sync recovery"
        - "Verify both apps show consistent data"
      expected_results:
        - "Both apps onboard successfully"
        - "All sync types work bidirectionally"
        - "URL sharing triggers correct app launch"
        - "Background sync maintains data consistency"
        - "No sync conflicts or data loss"
        - "Apps recover properly after restart"

    - id: "TC_DUAL_SHARECONNECTOR_QBIT_001"
      name: "ShareConnector + qBitConnector - Full Integration"
      description: "Test complete integration between ShareConnector and qBitConnector with sync"
      app_scenario: "dual_shareconnector_qbit"
      steps:
        - "Launch both apps and complete onboarding"
        - "Create profiles in ShareConnector (MeTube, YT-DLP, JDownloader)"
        - "Create qBittorrent profile in qBitConnector"
        - "Verify Asinka sync initializes between apps"
        - "Test theme sync between apps"
        - "Test profile sync between apps"
        - "Test language sync between apps"
        - "Share torrent URL to ShareConnector"
        - "Verify qBitConnector receives and processes torrent"
        - "Monitor sync status and data consistency"
        - "Test background sync while apps are closed"
        - "Verify sync conflict resolution"
        - "Test app restart and sync recovery"
        - "Verify both apps show consistent data"
      expected_results:
        - "Both apps onboard successfully"
        - "All sync types work bidirectionally"
        - "URL sharing triggers correct app launch"
        - "Background sync maintains data consistency"
        - "No sync conflicts or data loss"
        - "Apps recover properly after restart"

  prerequisites:
    - "Clean emulator environment"
    - "Mock services running (all)"
    - "Both apps installed as specified"
    - "No other ShareConnect apps installed"

  cleanup:
    - "Clear all app data"
    - "Remove all profiles"
    - "Reset mock service states"
    - "Clear download history"
    - "Reset sync data"