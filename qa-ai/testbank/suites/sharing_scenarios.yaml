test_suite:
  name: "Comprehensive URL Sharing Scenarios"
  description: "Test all supported URL types and sharing mechanisms across all app combinations"
  priority: "HIGH"
  tags: ["sharing", "url_types", "system_integration", "comprehensive"]
  app_scenarios: ["all_apps"]

  test_cases:
    - id: "TC_SHARING_STREAMING_YOUTUBE_001"
      name: "YouTube URL Sharing - All Variants"
      description: "Test all YouTube URL formats and sharing scenarios"
      app_scenario: "all_apps"
      steps:
        - "Set up all profiles (MeTube, YT-DLP, JDownloader)"
        - "Share standard YouTube URL: https://www.youtube.com/watch?v=dQw4w9WgXcQ"
        - "Verify system app chooser shows MeTube, YT-DLP, JDownloader"
        - "Select MeTube and verify download starts"
        - "Share YouTube Shorts URL: https://www.youtube.com/shorts/dQw4w9WgXcQ"
        - "Verify same app options appear"
        - "Share YouTube Music URL: https://music.youtube.com/watch?v=dQw4w9WgXcQ"
        - "Verify compatible apps shown"
        - "Share mobile YouTube URL: https://m.youtube.com/watch?v=dQw4w9WgXcQ"
        - "Share youtu.be short URL: https://youtu.be/dQw4w9WgXcQ"
        - "Test playlist URLs: https://www.youtube.com/playlist?list=PLrAXtmRdnEQy4qtr5GrLOg8ONEw1P7yFk"
        - "Verify all downloads complete successfully"
        - "Test sharing from different sources (browser, clipboard, etc.)"
      expected_results:
        - "All YouTube URL variants recognized"
        - "System app chooser shows correct options"
        - "All selected apps process URLs correctly"
        - "Downloads complete without errors"
        - "Different sources work identically"

    - id: "TC_SHARING_STREAMING_VIMEO_001"
      name: "Vimeo URL Sharing - All Formats"
      description: "Test Vimeo URL sharing across all compatible apps"
      app_scenario: "all_apps"
      steps:
        - "Set up streaming profiles"
        - "Share standard Vimeo URL: https://vimeo.com/123456789"
        - "Verify MeTube, YT-DLP, JDownloader options"
        - "Share Vimeo player URL: https://player.vimeo.com/video/123456789"
        - "Share Vimeo channel URL: https://vimeo.com/channels/staffpicks/123456789"
        - "Share Vimeo group URL: https://vimeo.com/groups/123456789/videos/123456789"
        - "Test with private Vimeo URLs"
        - "Verify download progress and completion"
        - "Test multiple Vimeo URLs simultaneously"
      expected_results:
        - "All Vimeo URL formats supported"
        - "Correct app options displayed"
        - "Downloads process successfully"
        - "Private content handled appropriately"
        - "Multiple downloads work"

    - id: "TC_SHARING_STREAMING_TIKTOK_001"
      name: "TikTok URL Sharing - Complete Coverage"
      description: "Test TikTok URL sharing with all supported formats"
      app_scenario: "all_apps"
      steps:
        - "Configure streaming profiles"
        - "Share TikTok video URL: https://www.tiktok.com/@username/video/123456789"
        - "Verify MeTube, YT-DLP, JDownloader appear"
        - "Share mobile TikTok URL: https://vm.tiktok.com/123456789/"
        - "Share TikTok music URL: https://www.tiktok.com/music/original-sound-123456789"
        - "Share TikTok profile URL: https://www.tiktok.com/@username"
        - "Test with different video qualities"
        - "Verify download completion"
        - "Test sharing from TikTok app"
      expected_results:
        - "All TikTok URL types recognized"
        - "System chooser shows correct apps"
        - "Downloads work for all formats"
        - "Different qualities supported"
        - "App-to-app sharing works"

    - id: "TC_SHARING_FILEHOSTING_MEGAFIRE_001"
      name: "MediaFire URL Sharing - File Hosting"
      description: "Test MediaFire URL sharing scenarios"
      app_scenario: "all_apps"
      steps:
        - "Set up file hosting profiles"
        - "Share MediaFire direct URL: https://www.mediafire.com/file/abc123/file.zip"
        - "Verify YT-DLP, JDownloader options"
        - "Share MediaFire folder URL: https://www.mediafire.com/folder/abc123"
        - "Test with different file types"
        - "Verify download progress"
        - "Test large file downloads"
        - "Check download integrity"
      expected_results:
        - "MediaFire URLs processed correctly"
        - "Folder sharing supported"
        - "All file types work"
        - "Large files download properly"
        - "Integrity maintained"

    - id: "TC_SHARING_TORRENT_MAGNET_001"
      name: "Magnet Link Sharing - All Torrent Clients"
      description: "Test magnet link sharing across all torrent connectors"
      app_scenario: "all_apps"
      steps:
        - "Set up all torrent profiles"
        - "Share magnet link: magnet:?xt=urn:btih:abc123...&dn=Example+Torrent"
        - "Verify all three torrent apps appear in chooser"
        - "Select TransmissionConnector and verify torrent added"
        - "Share another magnet and select uTorrentConnector"
        - "Share third magnet and select qBitConnector"
        - "Monitor all three downloads simultaneously"
        - "Verify progress tracking"
        - "Test torrent completion"
        - "Check download integrity"
      expected_results:
        - "All torrent apps appear in chooser"
        - "Each client processes magnets correctly"
        - "Simultaneous downloads work"
        - "Progress tracking accurate"
        - "Completed downloads verified"

    - id: "TC_SHARING_TORRENT_FILE_001"
      name: ".torrent File URL Sharing"
      description: "Test .torrent file URL sharing"
      app_scenario: "all_apps"
      steps:
        - "Configure torrent profiles"
        - "Share .torrent URL: https://example.com/file.torrent"
        - "Verify torrent apps in chooser"
        - "Test with different torrent file hosts"
        - "Verify download and parsing"
        - "Check metadata extraction"
        - "Monitor torrent progress"
        - "Verify completion"
      expected_results:
        - "Torrent URLs processed"
        - "File downloaded and parsed"
        - "Metadata extracted correctly"
        - "Download completes successfully"

    - id: "TC_SHARING_ARCHIVE_RAR_001"
      name: "RAR Archive Sharing - All Supported Apps"
      description: "Test RAR archive URL sharing"
      app_scenario: "all_apps"
      steps:
        - "Set up download profiles"
        - "Share RAR URL: https://example.com/archive.rar"
        - "Verify YT-DLP, JDownloader options"
        - "Share multi-part RAR: https://example.com/archive.part1.rar"
        - "Test password-protected RAR"
        - "Verify extraction process"
        - "Check file integrity"
        - "Test large archives"
      expected_results:
        - "RAR URLs processed correctly"
        - "Multi-part archives handled"
        - "Password protection supported"
        - "Extraction works properly"
        - "Large archives processed"

    - id: "TC_SHARING_DIRECT_DOWNLOAD_001"
      name: "Direct Download URLs - Comprehensive Testing"
      description: "Test direct download URLs of various types"
      app_scenario: "all_apps"
      steps:
        - "Configure download profiles"
        - "Share software installer: https://example.com/app.exe"
        - "Share document: https://example.com/document.pdf"
        - "Share image: https://example.com/photo.jpg"
        - "Share video: https://example.com/movie.mp4"
        - "Share audio: https://example.com/song.mp3"
        - "Share archive: https://example.com/files.zip"
        - "Verify appropriate apps shown"
        - "Test download completion"
        - "Check file integrity"
        - "Test large file downloads"
      expected_results:
        - "All file types processed"
        - "Correct apps suggested"
        - "Downloads complete successfully"
        - "File integrity maintained"
        - "Large files handled"

    - id: "TC_SHARING_SYSTEM_CHOOSER_001"
      name: "System App Chooser Behavior"
      description: "Test system app chooser behavior across all scenarios"
      app_scenario: "all_apps"
      steps:
        - "Test chooser with different app combinations installed"
        - "Verify chooser appears for supported URLs"
        - "Check chooser doesn't appear for unsupported URLs"
        - "Test chooser with single app installed"
        - "Test chooser with multiple apps installed"
        - "Verify app ordering and icons"
        - "Test chooser cancellation"
        - "Verify 'Always' and 'Just once' options"
        - "Test chooser with app updates"
      expected_results:
        - "Chooser behavior correct for all combinations"
        - "Supported URLs trigger chooser"
        - "Unsupported URLs handled gracefully"
        - "Single/multiple app scenarios work"
        - "UI elements correct"
        - "User selections respected"

    - id: "TC_SHARING_CLIPBOARD_INTEGRATION_001"
      name: "Clipboard Integration Testing"
      description: "Test clipboard-based URL sharing"
      app_scenario: "all_apps"
      steps:
        - "Copy various URLs to clipboard"
        - "Trigger clipboard monitoring"
        - "Verify URL detection"
        - "Test clipboard history"
        - "Share from clipboard history"
        - "Test multiple clipboard URLs"
        - "Verify clipboard clearing"
        - "Test with malformed clipboard content"
      expected_results:
        - "Clipboard monitoring works"
        - "URL detection accurate"
        - "History maintained"
        - "Sharing from history works"
        - "Multiple URLs handled"
        - "Malformed content ignored"

  prerequisites:
    - "Clean emulator environment"
    - "Mock services running"
    - "All apps installed with profiles"
    - "System app chooser enabled"

  cleanup:
    - "Clear download history"
    - "Clear clipboard"
    - "Reset app chooser preferences"
    - "Clear downloaded files"